# Domain-Oriented Prompt Design Pattern

## 説明  
Domain-Oriented Prompt Design Pattern は、特定ドメイン（金融、医療、法務、製造など）の専門知識・用語・データ構造をプロンプト設計の核とし、以下を組み込むことで応答の正確性と一貫性を高める手法です。  
- **ドメインスキーマ**：JSON Schema／Pydantic／Protobuf などでデータ形式を定義し、プロンプトに埋め込む  
- **専門用語リスト**：ドメイン用語や略語の定義をシステムプロンプトに含める  
- **ベストプラクティス例示**：代表的な出力例（フォーマット・スタイル）を few-shot で提示  
- **規約・制約ルール**：ビジネスロジックや法規制要件をチェックリスト形式でプロンプトに記載  

## 用途  
- **金融レポート自動生成**：損益計算書・貸借対照表の用語と構造をスキーマ化し、一貫したレポートを生成  
- **医療サマリー**：診療記録の専門用語・略称を正確に解釈・出力  
- **法務契約書ドラフト**：条文構造と必須条項をテンプレート化して生成  
- **製品データシート作成**：仕様項目のスキーマと単位を厳守した説明文を安定出力  

## 解決する課題  
1. **一般文脈への偏り**：汎用モデルがドメイン特有の文脈を正しく理解できない  
2. **用語・フォーマットのブレ**：同じ内容でも用語や数字フォーマットが一定せず、後処理コストが増大  
3. **コンプライアンス違反リスク**：必須項目や法規制チェックが欠落し、誤った出力を許容してしまう  
4. **再利用性不足**：ドメイン要素を各プロンプトにハードコーディングすると、メンテナンス性が低下  

## 対象とするシステム／プロジェクト  
- **エンタープライズ SaaS**：業界固有レポートやダッシュボードを自動生成するプラットフォーム  
- **ヘルスケア情報システム**：診療要約・検査結果解説を生成する医療支援ツール  
- **リーガルテック**：契約書テンプレートのドラフト生成・レビュー支援サービス  
- **製造業ナレッジベース**：製品仕様書・マニュアル作成の自動化  

## 利用するメリット  
- **高い正確性**：ドメインスキーマと専門用語で誤解を防止  
- **一貫したフォーマット**：出力例やテンプレートでスタイルを統一  
- **コンプライアンス担保**：必須チェックリストを明示し、規制違反のリスクを低減  
- **再利用性向上**：ドメイン定義を一箇所管理し、複数プロジェクトで共有可能  

## 注意点とトレードオフ  
- **設計コスト**：ドメインスキーマや用語集の整備に初期工数が必要  
- **プロンプト長増加**：詳細ルール・例示を含めるとトークン量が増え、コストが上昇  
- **モデル能力依存**：スキーマ遵守はモデルの function-calling や JSON モード対応が前提  
- **メンテナンス負荷**：ドメイン要件変更時にスキーマ・例示・ルールを同期更新する必要  

## 導入のヒント  
1. **ドメインスキーマを先に定義**  
   - JSON Schema や Pydantic モデルで必須フィールドと型を明文化  
2. **専門用語リポジトリ化**  
   - 用語集（略語・定義）をCSV/DBで管理し、プロンプト生成時に動的参照  
3. **テンプレート＋例示の組み合わせ**  
   - ベーステンプレートに few-shot サンプルを埋め込み、簡易版から品質確認  
4. **CI テストの組み込み**  
   - ドメインスキーマバリデーションと例示出力のユニットテストを自動化  
5. **段階的適用**  
   - まずは主要フィールドのみカバーし、徐々に用語集やルールを拡充  
